<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Garbage Collection Schedule</title>
    <link rel="stylesheet" href="/static/schedule.css">
</head>
<body>
<div class="schedule-container">
    <h2>Garbage Collection Schedule</h2>
    <p>Check when garbage collection is scheduled for your route.</p>

    <div id="scheduleCards" class="schedule-cards">
        <!-- Cards will be dynamically populated here -->
    </div>

    <div id="scheduleMessage" class="message"></div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", async function() {
        try {
            const response = await fetch('/api/schedules');
            if (response.ok) {
                const schedules = await response.json();
                const scheduleCards = document.getElementById("scheduleCards");

                schedules.forEach(schedule => {
                    const card = document.createElement("div");
                    card.classList.add("schedule-card");

                    card.innerHTML = `
                        <div class="card-content">
                            <h3>${schedule.route.name}</h3>
                            <p><strong>Day:</strong> ${schedule.dayOfWeek}</p>
                            <p><strong>Time:</strong> ${schedule.collectionTime}</p>
                            <p><strong>Frequency:</strong> ${schedule.frequency}</p>
                        </div>
                    `;
                    scheduleCards.appendChild(card);
                });
            } else {
                document.getElementById("scheduleMessage").innerText = "Could not load schedule data.";
            }
        } catch (error) {
            document.getElementById("scheduleMessage").innerText = "Error loading schedule data.";
        }
    });
</script>
</body>
</html>
